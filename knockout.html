<!DOCTYPE html>
<html>
<head>
	<meta http-equiv='Content-type' content='text/html; charset=utf-8'>
	<title>Budget</title>
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap.min.css" />
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/css/bootstrap-theme.min.css" />
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.min.css" />
	<style>
		.heading { border-bottom: 1px solid gray; margin-bottom: 7px;	}
		.number { text-align: right; }
	</style>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-9">
				<div class="row">
					<div class="col-md-4 col-md-offset-1" style="text-align: right">
						Starting Amount
					</div>
					<div class="col-md-2">
						<input placeholder="Starting Amount" type="number" data-bind="value: startingAmount, valueUpdate: 'input'" class="form-control" />
					</div>
				</div>
				<div class="row heading">
					<div class="col-md-12">Current Period (<span data-bind="text: priorPayDate"></span> - <span data-bind="text: nextPayDate"></span>)</div>
				</div>
				<!-- ko template: { name: 'transaction-template', data: currentPeriod } --><!-- /ko -->
				<!-- ko template: { name: 'balance-template', data: currentPeriodDetails } --><!-- /ko -->
				<div class="row heading">
					<div class="col-md-4">Next Period (<span data-bind="text: nextPayDate"></span> - <span data-bind="text: afterPayDate"></span>)</div>
					<div class="col-md-1 number">Income</div>
					<div class="col-md-2 number" data-bind="text: paycheckAmount"></div>
				</div>
				<!-- ko template: { name: 'transaction-template', data: nextPeriod } --><!-- /ko -->
				<!-- ko template: { name: 'balance-template', data: nextPeriodDetails } --><!-- /ko -->
				<div class="row heading">
					<div class="col-md-4">After 4 weeks (<span data-bind="text: afterPayDate"></span>+)</div>
					<div class="col-md-1 number">Income</div>
					<div class="col-md-2 number" data-bind="text: paycheckAmount"></div>
				</div>
				<!-- ko template: { name: 'transaction-template', data: afterPeriod } --><!-- /ko -->
				<!-- ko template: { name: 'balance-template', data: afterPeriodDetails } --><!-- /ko -->
				<div class="row">
					<form data-bind="submit: addTransaction" role="form" class="form">
						<div class="form-group col-md-1">
							<input placeholder="Day" data-bind="value: newDay" class="form-control" />
						</div>
						<div class="form-group col-md-4">
							<input placeholder="For" type="text" data-bind="value: newFor" class="form-control" />
						</div>
						<div class="form-group col-md-2">
							<input placeholder="Amount" type="number" data-bind="value: newAmount" class="form-control number" />
						</div>
						<input type="submit" value="Add" class="btn btn-primary" />
					</form>
				</div>
			</div>
			<div class="col-md-3">
				<form role="form">
					<div class="form-group">
						<label for="payCheckAmount">Paycheck Amount</label>
						<input type="number" class="form-control" id="payCheckAmount" placeholder="Paycheck Amount" data-bind="value: paycheckAmount, valueUpdate: 'input'">
					</div>
				</form>

				<div data-bind="visible: shareBoxVisible">
					<textarea data-bind="value: data, selectAll: true" class="form-control"></textarea>
					Click text box and CTRL+C to copy
				</div>
				<div data-bind="visible: loadBoxVisible">
					<textarea data-bind="value: dataToLoad, valueUpdate: 'input'" class="form-control" placeholder="Paste data here"></textarea><br />
					CTRL+V to paste and load the data
				</div>
				<button class="btn btn-default" data-bind="click: showShareBox">Share Data</button> <button class="btn btn-default" data-bind="click: showLoadBox">Load Data</button>

				<h5>Paid Transactions</h5>
				<!-- ko foreach: paidTransactions -->
				<div class="row">					
					<div class="col-xs-3"><button class="btn btn-xs btn-success" data-bind="click: $parent.reAddTransaction">+</button> <!-- ko text: day --><!-- /ko --></div>
					<div class="col-xs-5" data-bind="text: forAmount"></div>
					<div class="col-xs-4"><!-- ko text: amount --><!-- /ko --> <button class="btn btn-xs btn-danger" data-bind="click: $parent.removeTransaction">X</button></div>
				</div>
				<!-- /ko -->
			</div>
		</div>
	</div>
	<script type="text/html" id="balance-template">
		<div class="row">
			<div class="col-md-4 col-md-offset-1 number">Balance</div>
			<div class="col-md-2 number" data-bind="text: amount"></div>
		</div>
	</script>
	<script type="text/html" id="transaction-template">
		<div class="row" data-bind="visible: $data.length < 1">
			<div class="col-md-12">No transactions in this period</div>
		</div>
		<!-- ko foreach: $data -->
		<div class="row">
			<form role="form" class="form">
				<div class="form-group col-md-1">
					<input placeholder="Day" data-bind="value: day, selectAll: true" class="form-control" />
				</div>
				<div class="form-group col-md-4">
					<input placeholder="For" type="text" data-bind="value: forAmount, selectAll: true" class="form-control" />
				</div>
				<div class="form-group col-md-2">
					<input placeholder="Amount" type="number" data-bind="value: amount, valueUpdate: 'input'" class="form-control number" />
				</div>
				<input type="submit" value="PAID" class="btn btn-primary" data-bind="click: $parents[1].markTransactionPaid" />
			</form>
		</div>
		<!-- /ko -->
	</script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
	<script type="text/javascript" src="knockout.js"></script>
</body>
</html>
